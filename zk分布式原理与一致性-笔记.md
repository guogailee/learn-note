## 集中式到分布式的发展史

- 超时：请求发送超时 & 请求响应超时

- 分布式事务

- CAP定理

  ```
  一个分布式系统不可能同时满足一致性(C)，可用性(A)，分区容错性(P)三个基本需求，最多满足其中的两项。
  
  一致性：数据存储分布式如何保证都读到最新的值。
  
  可用性：有限时间内返回结果。
  
  分区容错性：部分分区故障，仍然可以提供一致性和可用性的服务。
  
  做法：舍弃强一致性，采用最终一致性。
  ```

- BASE理论

  ```
  CAP->演进->BASE理论
  
  BASE来源：
  Basically Available（基本可用）
  比如：电商大促部分用户引导到降级页面。
  
  Soft state（软状态）
  Eventually consistent(最终一致性)
  
  
  ```

## 一致性协议

- 2PC：两阶段提交协议

  ```
  一阶段：
  各参与者投票是否要继续执行接下去的事务提交操作。
  
  二阶段：
  协调者根据参与者投票决定是否最终进行事务提交。
  ```

  ```
  应用：绝大多数的关系型数据库采用2PC完成分布式事务
  ```

  ```
  优点：原理简单，方便实现
  缺点：同步阻塞，单点问题
  ```

- 3PC：